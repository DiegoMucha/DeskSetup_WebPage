<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="e-commerce" content="DeskSetup Pro empresa dedicada a la venta de setups gamer y productos de computación">
    <meta name="author" content="Grupo 2- Rolling Code">

    <!-- Bootstrap Core (libreria) CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles-index.css/styles-index.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cpwebassets.codepen.io/assets/icons/icon-font.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style-footer.css/style-footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <title>DeskSetup Pro - Escoge tu setup ideal</title>
</head>

<body>
    <!--Nav Bar-->
    <iframe src="navbar.html" width="100%" height="56" style="border:none; position: fixed; top: 0; z-index: 1000;" scrolling="no"></iframe>

    <!--Carrusel-->
    <div class="d-flex justify-content-center mt-2">
        <div id="carouselTincani" class="carousel slide" data-bs-ride="carousel" style="width: 100%; height: 400px;">
            <div class="carousel-inner" style="height: 100%;">
                <div class="carousel-item active">
                    <img src="/images/SLIDE/setup1.jpg" class="d-block w-100 h-100 object-fit-cover" alt="Materiales constructivos">
                </div>
                <div class="carousel-item">
                    <img src="/images/SLIDE/setup2.jpg" class="d-block w-100 h-100 object-fit-cover" alt="Operario trabajando">
                </div>
                <div class="carousel-item">
                    <img src="/images/SLIDE/setup3.jpg" class="d-block w-100 h-100 object-fit-cover" alt="Soldaduras de alta resistencia">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselTincani" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselTincani" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <!-- Categoría 1-->
    <section class="page-section bg-light" id="productos">
        <div class="container">
            <div class="text-center">
                <h1 class="display-5">Productos más vendidos</h1>
                <h1 class="display-6">Los componentes preferidos de todos</h1>
            </div>

            <!-- Productos desde API -->
            <div id="contenedor-productos" class="row mt-4"></div>
        </div>
    </section>

    <!-- FOOTER -->
    <iframe src="footer.html" width="100%" height="130" style="border:none; overflow:hidden;"></iframe>

    <!-- Scripts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Función para agregar al carrito
        function agregarAlCarrito(producto) {
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.push(producto);
            localStorage.setItem('carrito', JSON.stringify(carrito));
            alert('Producto agregado al carrito');
        }
    
        // Cargar productos
        fetch("http://40.118.212.141/productos.php")
            .then(res => res.json())
            .then(data => {
                const contenedor = document.getElementById("contenedor-productos");
                data.forEach(producto => {
                    const col = document.createElement("div");
                    col.className = "col-lg-4 col-md-6 col-sm-12 mb-4";
                    col.innerHTML = `
                        <div class="card h-100">
                            <img src="${producto.imagen_url}" class="card-img-top" alt="${producto.nombre}">
                            <div class="card-body">
                                <h5 class="card-title">${producto.nombre}</h5>
                                <p class="card-text"><strong>Marca:</strong> ${producto.marca}</p>
                                <p class="card-text">${producto.description}</p>
                                <p class="card-text"><strong>Precio:</strong> $${producto.precio}</p>
                                <p class="card-text"><strong>Stock:</strong> ${producto.stock}</p>
                                <button onclick='agregarAlCarrito(${JSON.stringify(producto)})' class="btn btn-primary">
                                    <i class="fas fa-cart-plus"></i> Comprar
                                </button>
                            </div>
                        </div>
                    `;
                    contenedor.appendChild(col);
                });
            })
            .catch(err => {
                console.error("Error al obtener productos:", err);
            });
    </script>
</body>
</html>